(this.webpackJsonpstonk=this.webpackJsonpstonk||[]).push([[0],{287:function(t,e,n){},288:function(t,e,n){},515:function(t,e,n){},519:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),c=n(109),s=n.n(c),r=(n(287),n.p,n(288),n(165)),a=n(20),l=(n(31),n(17)),u=n(18),j=n(21),d=n(22),b=n(532),h=n(536),f=n(170),O=n(171),x=n(144),p=n(169),g=n(537),v=n(271),y=n(263),m=n(178),k=n(37),S=n(3),A=(i.PureComponent,i.PureComponent,function(t,e,n,i){return"M ".concat(t,",").concat(e," h ").concat(n," v ").concat(i," h -").concat(n," Z")}),w=function(t){t.fill;var e=t.x,n=t.y,i=t.width,o=t.height,c=o>0?"#70af85":"#e40017";return Object(S.jsx)("path",{d:A(e,n,i,o),stroke:"none",fill:c,fillOpacity:"0.3"})},C=function(t){var e=t.daily,n=o.a.useState({moveX:-1}),i=Object(a.a)(n,2),c=i[0],s=i[1],l=function(t){s((function(e){return Object.assign({},e,t)}))},u=function(t){null!=t&null!=t.activeTooltipIndex&&l({moveX:t.activeTooltipIndex})},j=function(){l({moveX:-1})};return console.log("daily",e),Object(S.jsxs)("div",{children:[c.moveX<0?Object(S.jsx)("p",{style:{textAlign:"left"},children:" Close...."}):Object(S.jsxs)("p",{style:{textAlign:"left"},children:[Object(S.jsxs)("span",{children:["Close: ",e[c.moveX].close," "]}),Object(S.jsxs)("span",{children:["Vol ",e[c.moveX].vol," (",e[c.moveX].buyVol," - ",e[c.moveX].sellVol,") "]}),Object(S.jsxs)("span",{children:["volRSI ",e[c.moveX].volRsi," (",e[c.moveX].volRsiChg,") "]}),Object(S.jsxs)("span",{children:["RSI ",e[c.moveX].rsi," (",e[c.moveX].rsiChg,")"]})]}),Object(S.jsxs)(b.a,{width:800,height:200,data:e,syncId:"anyId",margin:{top:0,right:0,left:0,bottom:0},onMouseMove:u,onMouseLeave:j,children:[Object(S.jsx)(h.a,{stroke:"#f5f5f5"}),Object(S.jsx)(f.a,Object(r.a)({dataKey:"label",scale:"auto",interval:0,tickSize:7},"tickSize",0)),Object(S.jsx)(O.a,{yAxisId:"left",type:"number",dataKey:"close",name:"Price",unit:"k",stroke:"#8884d8",domain:["auto","auto"]}),Object(S.jsx)(x.a,{content:function(){return null}}),Object(S.jsx)(p.a,{type:"basic",yAxisId:"left",dataKey:"close",dot:!1,stroke:"#ff7300"})]}),Object(S.jsxs)(g.a,{width:800,height:150,data:e,syncId:"anyId",margin:{top:0,right:0,left:0,bottom:0},onMouseMove:u,onMouseLeave:j,children:[Object(S.jsx)(f.a,{dataKey:"label",tick:!1}),Object(S.jsx)(O.a,{yAxisId:"right",type:"number",dataKey:"vol",name:"Volumn",unit:"",stroke:"#82ca9d",domain:["auto","auto"]}),Object(S.jsx)(v.a,{stackId:"vol",yAxisId:"right",dataKey:"buyVol",barSize:5,fill:"#70af85"}),Object(S.jsx)(v.a,{stackId:"vol",yAxisId:"right",dataKey:"sellVol",barSize:5,fill:"#e40017"}),Object(S.jsx)(p.a,{type:"basic",yAxisId:"right",dataKey:"volAvg",dot:!1,stroke:"#ff7300"}),Object(S.jsx)(x.a,{content:function(){return null}})]}),Object(S.jsxs)(g.a,{width:800,height:100,data:e,syncId:"anyId",margin:{top:0,right:0,left:0,bottom:0},onMouseMove:u,onMouseLeave:j,children:[Object(S.jsx)(f.a,{dataKey:"day",tick:!1}),Object(S.jsx)(O.a,{type:"number",yAxisId:"left",dataKey:"volRsi",name:"Price",unit:"k",stroke:"#8884d8"}),Object(S.jsx)(O.a,{type:"number",yAxisId:"right",dataKey:"volRsiChg",orientation:"right",hide:!0,name:"Price",unit:"k",stroke:"#8884d8"}),Object(S.jsx)(x.a,{content:function(){return null}}),Object(S.jsx)(p.a,{type:"basic",yAxisId:"left",dataKey:"volRsi",dot:!1,stroke:"#70af85"}),Object(S.jsx)(y.a,{y:50,yAxisId:"left"}),Object(S.jsx)(y.a,{y:75,yAxisId:"left"}),Object(S.jsx)(v.a,{stackId:"vol",yAxisId:"right",dataKey:"volRsiChg",barSize:5,fill:"#70af85",shape:Object(S.jsx)(w,{})})]}),Object(S.jsxs)(g.a,{width:800,height:150,data:e,syncId:"anyId",margin:{top:0,right:0,left:0,bottom:0},onMouseMove:u,onMouseLeave:j,children:[Object(S.jsx)(f.a,{dataKey:"day",tick:!1}),Object(S.jsx)(O.a,{type:"number",dataKey:"rsi",name:"Price",unit:"k",stroke:"#8884d8"}),Object(S.jsx)(x.a,{content:function(){return null}}),Object(S.jsx)(p.a,{type:"basic",dataKey:"rsi",dot:!1,stroke:"#70af85"}),Object(S.jsx)(y.a,{y:70}),Object(S.jsx)(y.a,{y:50}),Object(S.jsx)(y.a,{y:30}),Object(S.jsx)(O.a,{yAxisId:"right",type:"number",dataKey:"rsiChg",name:"Volumn",unit:"",orientation:"right",stroke:"#82ca9d",hide:!0}),Object(S.jsx)(v.a,{stackId:"vol",yAxisId:"right",dataKey:"rsiChg",barSize:5,fill:"#70af85",shape:Object(S.jsx)(w,{})}),Object(S.jsx)(y.a,{yAxisId:"right",y:0}),Object(S.jsx)(m.a,{})]})]})},T=function(){var t=o.a.useState({ticket:"",intra:null,waiting:!1}),e=Object(a.a)(t,2),n=e[0],i=e[1],c=function(t){console.log("set State",t,n),i((function(e){return Object.assign({},e,t)}))};return Object(S.jsxs)("div",{children:[Object(S.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.log(n.ticket.toUpperCase(),n.intra),c({waiting:!0});var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tic:n.ticket})};fetch("http://localhost:5000/daily",e).then((function(t){return console.log(t.body),t.json()})).then((function(t){"ok"!=t.status?console.error("Error",t):c({intra:t.payload,waiting:!1}),console.log(n,t)})).catch((function(){return c({waiting:!1})}))},children:[Object(S.jsx)("fieldset",{children:Object(S.jsxs)("label",{children:[Object(S.jsx)("p",{children:"Ticket"}),Object(S.jsx)("input",{name:"tic",value:n.ticket,onChange:function(t){c({ticket:t.target.value.toUpperCase()})}})]})}),Object(S.jsx)("button",{type:"submit",disabled:n.waiting,children:"Submit"})]}),null!=n.intra?Object(S.jsx)(C,{daily:n.intra}):null]})},F=n(32),M=n(110),I=n(30),D=n(44),E=n(38),R=n(103),B=n(9),P=n(15),L=n.n(P),N=n(26),X=n(4),K=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(l.a)(this,n),i=e.call(this,t),console.log("sessionProps",t),i.renderSVG=i.renderSVG.bind(Object(F.a)(i)),i.drawOnCanvas=i.drawOnCanvas.bind(Object(F.a)(i)),i}return Object(u.a)(n,[{key:"drawOnCanvas",value:function(t,e){var n=e.xAccessor,i=e.width,o=z(this.props,e,n,i),c=o.rects,s=o.sessionBg;!function(t,e,n,i){var o=e.opacity,c=e.sessionBackGround,s=e.sessionBackGroundOpacity;e.showSessionBackground&&(t.fillStyle=Object(X.hexToRGBA)(c,s),i.forEach((function(e){var n=e.x,i=e.y,o=e.height,c=e.width;t.beginPath(),t.rect(n,i,c,o),t.closePath(),t.fill()})));n.forEach((function(e){var n=e.x,i=e.y,c=e.height,s=e.w1,r=e.w2,a=e.stroke1,l=e.stroke2,u=e.fill1,j=e.fill2;s>0&&(t.fillStyle=Object(X.hexToRGBA)(u,o),"none"!==a&&(t.strokeStyle=a),t.beginPath(),t.rect(n,i,s,c),t.closePath(),t.fill(),"none"!==a&&t.stroke()),r>0&&(t.fillStyle=Object(X.hexToRGBA)(j,o),"none"!==l&&(t.strokeStyle=l),t.beginPath(),t.rect(n+s,i,r,c),t.closePath(),t.fill(),"none"!==l&&t.stroke())}))}(t,this.props,c,s)}},{key:"render",value:function(){return Object(S.jsx)(L.a,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:N.getAxisCanvas,drawOn:["pan"]})}},{key:"renderSVG",value:function(t){var e=this.props,n=e.className,i=e.opacity,o=this.props,c=o.showSessionBackground,s=o.sessionBackGround,r=o.sessionBackGroundOpacity,a=t.xAccessor,l=t.width,u=z(this.props,t,a,l),j=u.rects,d=u.sessionBg,b=c?d.map((function(t,e){return Object(S.jsx)("rect",Object(R.a)(Object(R.a)({},t),{},{opacity:r,fill:s}),e)})):null;return Object(S.jsxs)("g",{className:n,children:[b,j.map((function(t,e){return Object(S.jsxs)("g",{children:[Object(S.jsx)("rect",{x:t.x,y:t.y,width:t.w1,height:t.height,fill:t.fill1,stroke:t.stroke1,fillOpacity:i}),Object(S.jsx)("rect",{x:t.x+t.w1,y:t.y,width:t.w2,height:t.height,fill:t.fill2,stroke:t.stroke2,fillOpacity:i})]},e)}))]})}}]),n}(i.Component);function z(t,e,n,i){var o=e.xScale,c=e.chartConfig.yScale,s=e.plotData,r=t.sessionStart,l=t.bySession,u=t.partialStartOK,j=t.partialEndOK,d=t.bins,b=t.maxProfileWidthPercent,h=t.source,f=t.volume,O=t.absoluteChange,x=t.orient,p=t.fill,g=t.stroke;console.log("sessionStart",r);var v=Object(X.accumulatingWindow)().discardTillStart(!u).discardTillEnd(!j).accumulateTill((function(t,n){return r(Object(R.a)({d:t,i:n},e))})).accumulator(X.identity),y=s.length>1?o(n(s[1]))-o(n(Object(X.head)(s))):0,m=l?v(s):[s];console.log("sessions",m),console.log("plotData",s);var S=m.map((function(t){var e=l?o(n(Object(X.head)(t))):0,s=l?o(n(Object(X.last)(t))):i,r=s-e+y,u=Object(B.histogram)().value(h).thresholds(d),j=Object(I.nest)().key((function(t){return t.direction})).sortKeys("right"===x?B.descending:B.ascending).rollup((function(t){return Object(B.sum)(t,(function(t){return t.volume}))})),v=u(t),m=v.map((function(t){return t.map((function(t){return O(t)>0?{direction:"up",volume:f(t)}:{direction:"down",volume:f(t)}}))})).map((function(t){return j.entries(t)})),S=m.map((function(t){return Object(B.sum)(t.map((function(t){return t.value})))})),A="right"===x?[e,e+r*b/100]:[s,s-r*(100-b)/100],w=Object(a.a)(A,2),C=w[0],T=w[1],F=Object(k.scaleLinear)().domain([0,Object(B.max)(S)]).range([C,T]),M=m.map((function(t){var e=Object(B.sum)(t,(function(t){return t.value})),n=F(e),i=function(t){return Object(X.head)(t.range())}(F)-n;return{x:i<0?n+i:n,ws:t.map((function(t){return{type:t.key,width:t.value*Math.abs(i)/e}})),totalVolumeX:n}})),D=Object(B.zip)(v,M).map((function(t){var e=Object(a.a)(t,2),n=e[0],o=e[1],s=o.x,r=o.ws,l=r[0]||{type:"up",width:0},u=r[1]||{type:"down",width:0};return{y:c(n.x1),height:c(n.x1)-c(n.x0),x:s,width:i,w1:l.width,w2:u.width,stroke1:Object(X.functor)(g)(l),stroke2:Object(X.functor)(g)(u),fill1:Object(X.functor)(p)(l),fill2:Object(X.functor)(p)(u)}}));return{rects:D,sessionBg:{x:e,y:Object(X.last)(D).y,height:Object(X.head)(D).y-Object(X.last)(D).y+Object(X.head)(D).height,width:r}}}));return{rects:Object(B.merge)(S.map((function(t){return t.rects}))),sessionBg:S.map((function(t){return t.sessionBg}))}}K.defaultProps={className:"line ",bins:20,opacity:.5,maxProfileWidthPercent:50,fill:function(t){return"up"===t.type?"#6BA583":"#FF0000"},stroke:"#FFFFFF",showSessionBackground:!1,sessionBackGround:"#4682B4",sessionBackGroundOpacity:.3,source:function(t){return t.close},volume:function(t){return t.volume},absoluteChange:function(t){return t.absoluteChange},bySession:!1,sessionStart:function(t){var e=t.d,n=t.i,i=t.plotData;return n>0&&i[n-1].date.getMonth()!==e.date.getMonth()},orient:"left",partialStartOK:!0,partialEndOK:!0};var V=n(48),Y=n(49),G=n(98),H=n(122),W=n(92),J=n(88),U=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).saveNode=i.saveNode.bind(Object(F.a)(i)),i.resetYDomain=i.resetYDomain.bind(Object(F.a)(i)),i.handleReset=i.handleReset.bind(Object(F.a)(i)),i}return Object(u.a)(n,[{key:"componentWillMount",value:function(){this.setState({suffix:1})}},{key:"saveNode",value:function(t){this.node=t}},{key:"resetYDomain",value:function(){this.node.resetYDomain()}},{key:"handleReset",value:function(){this.setState({suffix:this.state.suffix+1})}},{key:"render",value:function(){Object(G.change)();var t=this.props,e=t.type,n=t.data,i=t.width,o=t.height,c=t.ratio,s=.72*o,r=s/2.5,a=.26*o;console.log("height",o,s,r,a);var l=Object(G.sma)().id(3).options({windowSize:50,sourcePath:"volumn"}).merge((function(t,e){t.smaVolume50=e})).accessor((function(t){return t.smaVolume50})),u=l(n),j=H.discontinuousTimeScaleProvider.inputDateAccessor((function(t){return t.date}))(u),d=j.data,b=j.xScale,h=j.xAccessor,f=j.displayXAccessor,O=[h(Object(X.last)(d))+1,h(d[Math.max(0,d.length-150)])];console.log("xextend",O);Object(k.scaleOrdinal)(k.schemeCategory10).domain(Object(I.set)(d.map((function(t){return t.region}))));return Object(S.jsxs)(D.b,{ref:this.saveNode,height:o,width:i,ratio:c,margin:{left:1,right:40,top:1,bottom:1},type:e,seriesName:"MSFT_".concat(this.state.suffix),data:d,xScale:b,xAccessor:h,displayXAccessor:f,xExtents:O,children:[Object(S.jsxs)(D.a,{id:1,height:s,yExtents:[function(t){return[t.high,t.low]}],children:[Object(S.jsx)(V.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1}),Object(S.jsx)(V.YAxis,{axisAt:"right",orient:"right",ticks:5}),Object(S.jsx)(Y.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(M.b)(".2f")}),Object(S.jsx)(E.CandlestickSeries,{}),Object(S.jsx)(E.LineSeries,{yAccessor:function(t){return t.fitval},stroke:"blue",defined:function(t){return!isNaN(null)&&null!==t}}),Object(S.jsx)(E.LineSeries,{yAccessor:function(t){return t.fitCurve},stroke:"red",defined:function(t){return!isNaN(null)&&null!==t}}),Object(S.jsx)(Y.EdgeIndicator,{itemType:"last",orient:"right",edgeAt:"right",yAccessor:function(t){return t.close},fill:function(t){return t.close>t.open?"#6BA583":"#FF0000"}}),Object(S.jsx)(W.OHLCTooltip,{origin:[0,10]}),Object(S.jsx)(D.c,{onReset:this.handleReset})]}),Object(S.jsxs)(D.a,{id:2,yExtents:[0,function(t){return t.volumn}],height:r,origin:function(t,e){return[0,s-r]},children:[Object(S.jsx)(V.YAxis,{axisAt:"left",orient:"left",ticks:5,tickFormat:Object(M.b)(".2s")}),Object(S.jsx)(Y.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Object(M.b)(".4s")}),Object(S.jsx)(E.StackedBarSeries,{yAccessor:[function(t){return t.buyVol},function(t){return t.sellVol},function(t){return t.unkVol}],fill:function(t,e){return 0==e?"#6BA583":1==e?"#FF0000":"#A9A9B0"},widthRatio:.8,opacity:.3}),Object(S.jsx)(E.AreaSeries,{yAccessor:l.accessor(),stroke:l.stroke(),fill:l.fill()})]}),Object(S.jsxs)(D.a,{id:3,yExtents:[0,100],height:a,origin:function(t,e){return[0,s+1]},children:[Object(S.jsx)(V.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1,outerTickSize:0}),Object(S.jsx)(E.RSISeries,{yAccessor:function(t){return t.volRsi},overSold:"75",overBought:"25",middle:"50",stroke:{insideThreshold:"#d60dd6"}}),Object(S.jsx)(W.RSITooltip,{origin:[0,15],yAccessor:function(t){return t.volRsi},options:{windowSize:14}})]}),Object(S.jsx)(Y.CrossHairCursor,{})]})}}]),n}(o.a.Component);U.defaultProps={type:"svg",height:600};var _=U=Object(J.fitWidth)(U),Z=n(278),q="http://localhost:5000",Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:"POST"};return null!=e&&(n.headers={"Content-Type":"application/json"},n.body=JSON.stringify(e)),fetch(q+t,n).then((function(t){return t.json()})).then((function(t){return"ok"!=t.status?(console.error("Error",t),null):t.payload}))},$=null,tt=function(t){var e=t.ticket,n=t.data;return console.log("Start TodayChart",e,n),Object(S.jsx)(_,{type:"hybrid",width:1200,height:500,ratio:1.5,data:n})},et=function(){var t=o.a.useState(null),e=Object(a.a)(t,2),n=e[0],i=e[1],c=o.a.useState({ticket:"",waiting:!1}),s=Object(a.a)(c,2),r=s[0],l=s[1],u=o.a.useState(null),j=Object(a.a)(u,2),d=(j[0],j[1],function(t){l((function(e){return Object.assign({},e,t)}))}),b=function(t,e){t.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tic:r.ticket,tillDate:0,refetch:e,refresh:1})};console.log("getData .......",r.ticket),d({waiting:!0}),fetch("http://localhost:5000/abv-test",n).then((function(t){return t.json()})).then((function(t){"ok"!=t.status?(console.error("Error",t),i(null)):(console.log("OK",t.payload),i(t.payload.map((function(t){return t.date=new Date(1e3*t.time),t.volume=t.volumn,t}))))})).finally((function(){return d({waiting:!1})}))};return console.log("start Today"),Object(S.jsxs)("div",{children:[Object(S.jsxs)("form",{onSubmit:function(t){return b(t,0)},children:[Object(S.jsx)("fieldset",{children:Object(S.jsxs)("label",{children:[Object(S.jsx)("p",{children:"Ticket"}),Object(S.jsx)("input",{name:"tic",value:r.ticket,onChange:function(t){d({ticket:t.target.value.toUpperCase()})}})]})}),Object(S.jsx)("button",{type:"submit",disabled:r.waiting,children:"Submit"})]}),Object(S.jsx)("button",{onClick:function(t){return b(t,1)},children:"Live Data"}),null==n?null:Object(S.jsx)(tt,{data:n,ticket:r.ticket})]})},nt=n(127),it=function(t){var e=t.groups,n=t.onClick,o=Object(i.useState)({activeTab:""}),c=Object(a.a)(o,2),s=c[0],r=c[1],l=function(t){var e;e={activeTab:t},r((function(t){return Object.assign({},t,e)})),n(t)};return console.log("Header",e,n),Object(S.jsx)("ol",{className:"tab-list",children:e.map((function(t){var e="tab-list-item";return s.activeTab==t&&(e+=" tab-list-active"),Object(S.jsx)("li",{className:e,onClick:function(){return l(t)},children:t},t)}))})},ot=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(l.a)(this,n),i=e.call(this,t),console.log("Creating Chart",i.props.ticket),i.state={initialData:null},i}return Object(u.a)(n,[{key:"refresh",value:function(t){var e=this,n=this.props,i=n.ticket,o=n.getLive;console.log("refreshing",i),function(t,e,n){return Q("/abv-test",{tic:t,tillDate:e,refetch:n})}(i,o?0:1,t).then((function(t){return e.setState({initialData:t.map((function(t){return t.date=new Date(1e3*t.time),t}))})}))}},{key:"componentDidMount",value:function(){this.refresh(0)}},{key:"render",value:function(){var t=this;console.log("Rendering",this.props);var e=this.state.initialData;if(null==e)return Object(S.jsx)("div",{children:"Wating"});var n=this.props,i=n.type,o=n.ticket,c=n.isFav,s=n.socket,r=n.width,a=n.height,l=n.ratio,u=.72*a,j=u/2.5,d=.26*a;console.log("MiniChart",o,e);var b=Object(G.sma)().id(3).options({windowSize:50,sourcePath:"volumn"}).merge((function(t,e){t.smaVolume50=e})).accessor((function(t){return t.smaVolume50})),h=b(e),f=H.discontinuousTimeScaleProvider.inputDateAccessor((function(t){return t.date}))(h),O=f.data,x=f.xScale,p=f.xAccessor,g=f.displayXAccessor,v=[p(Object(X.last)(O))+1,p(O[Math.max(0,O.length-81)])];Object(k.scaleOrdinal)(k.schemeCategory10).domain(Object(I.set)(O.map((function(t){return t.region}))));return Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{children:o}),Object(S.jsx)("button",{onClick:function(){s.emit("appdb",{op:c?"delFavorite":"addFavorite",params:{tic:o}})},children:c?"Unfavor":"Favor"}),Object(S.jsx)("button",{onClick:function(){return t.refresh(1)},children:"Live Data"}),Object(S.jsxs)(D.b,{height:a,width:r,ratio:l,margin:{left:1,right:10,top:1,bottom:1},type:i,seriesName:o,data:O,xScale:x,xAccessor:p,displayXAccessor:g,xExtents:v,children:[Object(S.jsxs)(D.a,{id:1,height:u,yExtents:[function(t){return[t.high,t.low]}],children:[Object(S.jsx)(V.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1}),Object(S.jsx)(V.YAxis,{axisAt:"right",orient:"right",ticks:5}),Object(S.jsx)(Y.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(M.b)(".2f")}),Object(S.jsx)(E.CandlestickSeries,{}),Object(S.jsx)(E.LineSeries,{yAccessor:function(t){return t.fitval},stroke:"blue",defined:function(t){return!isNaN(null)&&null!==t}}),Object(S.jsx)(E.LineSeries,{yAccessor:function(t){return t.fitCurve},stroke:"red",defined:function(t){return!isNaN(null)&&null!==t}}),Object(S.jsx)(W.OHLCTooltip,{origin:[0,10]})]}),Object(S.jsxs)(D.a,{id:2,yExtents:[0,function(t){return t.volumn}],height:j,origin:function(t,e){return[0,u-j]},children:[Object(S.jsx)(V.YAxis,{axisAt:"left",orient:"left",ticks:5,tickFormat:Object(M.b)(".2s")}),Object(S.jsx)(Y.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Object(M.b)(".4s")}),Object(S.jsx)(E.StackedBarSeries,{yAccessor:[function(t){return t.buyVol},function(t){return t.sellVol},function(t){return t.unkVol}],fill:function(t,e){return 0==e?"#6BA583":1==e?"#FF0000":"#A9A9B0"},widthRatio:.8,opacity:.3}),Object(S.jsx)(E.AreaSeries,{yAccessor:b.accessor(),stroke:b.stroke(),fill:b.fill()})]}),Object(S.jsxs)(D.a,{id:3,yExtents:[0,100],height:d,origin:function(t,e){return[0,u+1]},children:[Object(S.jsx)(V.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1,outerTickSize:0}),Object(S.jsx)(E.RSISeries,{yAccessor:function(t){return t.volRsi},overSold:100,overBought:0,middle:50,stroke:{insideThreshold:"#d60dd6"}}),Object(S.jsx)(W.RSITooltip,{origin:[0,15],yAccessor:function(t){return t.volRsi},options:{windowSize:14}})]}),Object(S.jsx)(Y.CrossHairCursor,{})]})]})}}]),n}(o.a.Component);ot.defaultProps={type:"svg",height:600};var ct=ot=Object(J.fitWidth)(ot),st=function(t){var e=t.tickets,n=t.favorites,i=t.socket,c=t.getLive,s=o.a.useState({}),r=Object(a.a)(s,2);r[0],r[1];console.log("MultiChart",e);return Object(S.jsx)("div",{children:e.map((function(t){return Object(S.jsx)(ct,{ticket:t,isFav:n.includes(t),socket:i,getLive:c,type:"hybrid",width:600,height:300,ratio:1.5},t)}))})},rt=(n(515),"* Favorites *"),at="* Focus *",lt=function(){var t=Object(i.useState)({}),e=Object(a.a)(t,2),n=e[0],o=e[1],c=Object(i.useState)([]),s=Object(a.a)(c,2),r=s[0],l=s[1],u=Object(i.useState)({waiting:!0,logmsg:"",activeTab:"",getLive:!1,refetchHistory:!1}),j=Object(a.a)(u,2),d=j[0],b=j[1],h=Object(i.useState)(null),f=Object(a.a)(h,2),O=f[0],x=f[1],p=Object(i.useState)(null),g=Object(a.a)(p,2),v=(g[0],g[1]),y=function(t){b((function(e){return Object.assign({},e,t)}))},m=function(t,e){var n={};n[t]=e,o((function(t){return Object.assign({},t,n)})),l((function(e){return Object(nt.a)(new Set([t].concat(Object(nt.a)(e))))}))};return Object(i.useEffect)((function(){y({logmsg:"Fetching ticket groups..."}),Q("/grouped-tickets").then((function(t){var e;e=t,o((function(t){return Object.assign({},t,e)})),l((function(t){return Object(nt.a)(new Set([].concat(Object(nt.a)(t),Object(nt.a)(Object.keys(e)))))})),y({logmsg:"Groups fetched"})})).catch((function(t){return y({logmsg:"Failed to fetch ticket group: ".concat(t)})})).finally((function(){return y({waiting:!1})}));var t=(null!=$&&$.connected||($=Object(Z.a)(q+"/test")),$);return console.log("WS opened"),t.on("appdb",(function(t){console.log("WS on appdb",t),m(rt,t.fav),m(at,[]),v(t)})),t.emit("appdb",{op:"get",params:{}}),x(t),function(){return t.close()}}),[x]),Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{children:d.logmsg}),Object(S.jsx)("button",{onClick:function(){console.log("updating",d),function(t){Q("/update-intra",{tillDate:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,refetch:t})}(d.refetchHistory,d.getLive?0:1)},children:"Update"}),Object(S.jsxs)("label",{children:[Object(S.jsx)("input",{type:"checkbox",checked:d.getLive,onChange:function(){return y({getLive:!d.getLive})}}),"Get Live"]}),Object(S.jsxs)("label",{children:[Object(S.jsx)("input",{type:"checkbox",checked:d.refetchHistory,onChange:function(){return y({refetchHistory:!d.refetchHistory})}}),"Refetch"]}),Object(S.jsx)("hr",{}),Object(S.jsx)(it,{groups:r,onClick:function(t){var e;t===at?(e=d.getLive?0:1,Q("/focus-tickets",{tillDate:e})).then((function(e){m(at,e),y({logmsg:"Fetched focus tickets"}),y({activeTab:t})})):y({activeTab:t})}}),""===d.activeTab?null:Object(S.jsx)(st,{tickets:n[d.activeTab],socket:O,favorites:n[rt],getLive:d.getLive})]})},ut=n(64),jt=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).saveNode=i.saveNode.bind(Object(F.a)(i)),i.resetYDomain=i.resetYDomain.bind(Object(F.a)(i)),i.handleReset=i.handleReset.bind(Object(F.a)(i)),i}return Object(u.a)(n,[{key:"componentWillMount",value:function(){this.setState({suffix:1})}},{key:"saveNode",value:function(t){this.node=t}},{key:"resetYDomain",value:function(){this.node.resetYDomain()}},{key:"handleReset",value:function(){this.setState({suffix:this.state.suffix+1})}},{key:"render",value:function(){var t=this.props,e=t.type,n=t.width,i=t.ratio,o=this.props,c=o.mouseMoveEvent,s=o.panEvent,r=o.zoomEvent,a=o.zoomAnchor,l=this.props.clamp;console.log("props",this.props,a);var u=this.props.data,j=H.discontinuousTimeScaleProvider.inputDateAccessor((function(t){return t.date}))(u),d=j.data,b=j.xScale,h=j.xAccessor,f=j.displayXAccessor,O=[h(Object(X.last)(d)),h(d[Math.max(0,d.length-150)])],x={innerTickSize:-1*(n-70-70),tickStrokeOpacity:.2},p={innerTickSize:-1*(400-20-30),tickStrokeOpacity:.2};return Object(S.jsxs)(D.b,{ref:this.saveNode,height:400,ratio:i,width:n,margin:{left:70,right:70,top:10,bottom:30},mouseMoveEvent:c,panEvent:s,zoomEvent:r,clamp:l,zoomAnchor:a,type:e,seriesName:"MSFT_".concat(this.state.suffix),data:d,xScale:b,xExtents:O,xAccessor:h,displayXAccessor:f,children:[Object(S.jsxs)(D.a,{id:1,yExtents:function(t){return[t.high,t.low]},children:[Object(S.jsx)(V.XAxis,Object(R.a)({axisAt:"bottom",orient:"bottom",zoomEnabled:r},p)),Object(S.jsx)(V.YAxis,Object(R.a)({axisAt:"right",orient:"right",ticks:5,zoomEnabled:r},x)),Object(S.jsx)(Y.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(M.b)(".2f")}),Object(S.jsx)(E.CandlestickSeries,{}),Object(S.jsx)(W.OHLCTooltip,{origin:[-40,0]}),Object(S.jsx)(D.c,{onReset:this.handleReset})]}),Object(S.jsxs)(D.a,{id:2,yExtents:function(t){return t.volume},height:150,origin:function(t,e){return[0,e-150]},children:[Object(S.jsx)(V.YAxis,{axisAt:"left",orient:"left",ticks:5,tickFormat:Object(M.b)(".2s"),zoomEnabled:r}),Object(S.jsx)(Y.MouseCoordinateX,{at:"bottom",orient:"bottom",displayFormat:Object(ut.b)("%Y-%m-%d")}),Object(S.jsx)(Y.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Object(M.b)(".4s")}),Object(S.jsx)(E.BarSeries,{yAccessor:function(t){return t.volume},fill:function(t){return t.close>t.open?"#6BA583":"#FF0000"}})]}),Object(S.jsx)(Y.CrossHairCursor,{})]})}}]),n}(o.a.Component);jt.defaultProps={type:"svg",mouseMoveEvent:!0,panEvent:!0,zoomEvent:!0,clamp:!1};var dt=jt=Object(J.fitWidth)(jt),bt=n(538);var ht=Object(ut.c)("%Y-%m-%d");var ft=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("https://cdn.rawgit.com/rrag/react-stockcharts/master/docs/data/MSFT.tsv").then((function(t){return t.text()})).then((function(t){return Object(bt.a)(t,(e=ht,function(t){return t.date=e(t.date),t.open=+t.open,t.high=+t.high,t.low=+t.low,t.close=+t.close,t.volume=+t.volume,t}));var e})).then((function(e){t.setState({data:e})}))}},{key:"render",value:function(){var t=this;return null==this.state?Object(S.jsx)("div",{children:"Loading..."}):Object(S.jsx)(J.TypeChooser,{children:function(e){return Object(S.jsx)(dt,{type:e,data:t.state.data})}})}}]),n}(o.a.Component),Ot=n(276),xt=n(29);var pt=function(){return Object(S.jsx)(Ot.a,{children:Object(S.jsx)("div",{children:Object(S.jsxs)(xt.c,{children:[Object(S.jsx)(xt.a,{exact:!0,path:"/",children:Object(S.jsx)(T,{})}),Object(S.jsx)(xt.a,{path:"/test",children:Object(S.jsx)(ft,{})}),Object(S.jsx)(xt.a,{path:"/today",children:Object(S.jsx)(et,{})}),Object(S.jsx)(xt.a,{path:"/group",children:Object(S.jsx)(lt,{})})]})})})},gt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,539)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),i(t),o(t),c(t),s(t)}))};s.a.render(Object(S.jsx)(o.a.StrictMode,{children:Object(S.jsx)(pt,{})}),document.getElementById("root")),gt()}},[[519,1,2]]]);
//# sourceMappingURL=main.54a53df7.chunk.js.map